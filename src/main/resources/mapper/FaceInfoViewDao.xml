<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.niuzhendong.service.dao.FaceInfoViewDao">

    <insert id="saveFaceInfo" parameterType="com.niuzhendong.service.dto.Face">
     replace into `face`.`face_regist_info`(id, peo_id, peo_name, status, peo_type, peo_des, bucket_name, file_name, `type`, feature, del_flag)
     values(#{id}, #{peoId}, #{peoName}, #{status}, #{peoType}, #{peoDes}, #{bucketName}, #{fileName}, #{type}, #{feature}, #{delFlag})
    </insert>

    <select id="allPersonLabel" resultType="java.util.Map">
        SELECT sec_label as label, sec_label_code as code
        FROM face.person_label_info;
    </select>
    
    <update id="editInfo" parameterType="com.niuzhendong.service.dto.Face">
        <foreach collection="list" item="item" index="index" open="" close="" separator=";">
            UPDATE `face`.`face_regist_info`
            <set>
                <if test="item.peoId !=null">
                    peo_id=#{item.peoId}
                </if>
                <if test="item.peoName!=null">
                    peo_name=#{item.peoName}
                </if>
                <if test="item.peoType!=null">
                    peo_type=#{item.peo_type}
                </if>
                <if test="item.type!=null">
                    `type`=#{item.type}
                </if>
            </set>
            where id = #{item.id}
        </foreach>
    </update>
</mapper>